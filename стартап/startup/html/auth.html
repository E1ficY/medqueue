<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>–í—Ö–æ–¥ –≤ MedQueue</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="../css/styles.css">
  <script src="https://www.google.com/recaptcha/api.js?render=explicit" async defer></script>
  <style>

    body {
      background: linear-gradient(135deg, #16a34a 0%, #15803d 100%);
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 20px;
      font-family: 'Inter', sans-serif;
    }

    .auth-card {
      background: white;
      border-radius: 20px;
      padding: 40px;
      max-width: 450px;
      width: 100%;
      box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
    }

    .logo {
      text-align: center;
      margin-bottom: 30px;
    }

    .logo-icon {
      font-size: 60px;
      margin-bottom: 10px;
    }

    .logo-title {
      font-size: 22px;
      font-weight: 900;
      color: var(--accent);
      letter-spacing: -0.5px;
      margin: 0;
    }

    .tabs {
      display: flex;
      gap: 10px;
      margin-bottom: 30px;
      background: #f3f4f6;
      padding: 5px;
      border-radius: 12px;
    }

    .tab {
      flex: 1;
      padding: 12px;
      border: none;
      background: transparent;
      border-radius: 8px;
      font-weight: 700;
      cursor: pointer;
      color: #6b7280;
    }

    .tab.active {
      background: white;
      color: #16a34a;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
    }

    .form-group {
      margin-bottom: 20px;
    }

    .form-label {
      display: block;
      font-weight: 600;
      margin-bottom: 8px;
      color: #374151;
    }

    .form-input {
      width: 100%;
      padding: 12px;
      border: 2px solid #e5e7eb;
      border-radius: 10px;
      font-size: 15px;
      font-family: 'Inter', sans-serif;
    }

    .form-input:focus {
      outline: none;
      border-color: #16a34a;
    }

    .submit-btn {
      width: 100%;
      padding: 14px;
      background: linear-gradient(135deg, #16a34a, #15803d);
      color: white;
      border: none;
      border-radius: 10px;
      font-weight: 700;
      font-size: 16px;
      cursor: pointer;
    }

    .submit-btn:hover {
      opacity: 0.9;
    }

    .message {
      padding: 12px;
      border-radius: 8px;
      margin-bottom: 20px;
      display: none;
    }

    .error {
      background: #fee2e2;
      color: #dc2626;
      border: 1px solid #fca5a5;
    }

    .success {
      background: #dcfce7;
      color: #166534;
      border: 1px solid #86efac;
    }

    .hidden {
      display: none;
    }

    .back-link {
      text-align: center;
      margin-top: 20px;
    }

    .back-link a {
      color: #16a34a;
      text-decoration: none;
      font-weight: 600;
    }

    .code-step {
      text-align: center;
    }

    .code-input {
      font-size: 24px;
      letter-spacing: 8px;
      text-align: center;
      font-weight: 700;
      padding: 15px;
    }

    /* ===== DARK THEME OVERRIDES ===== */
    [data-theme="dark"] body {
      background: linear-gradient(135deg, #0a1f10 0%, #0d2b16 100%) !important;
    }
    [data-theme="dark"] .auth-card {
      background: #132910;
      box-shadow: 0 20px 60px rgba(0,0,0,0.6);
      border: 1px solid rgba(34,197,94,0.15);
    }
    [data-theme="dark"] .tabs {
      background: #0a1f10;
    }
    [data-theme="dark"] .tab {
      color: var(--muted);
    }
    [data-theme="dark"] .tab.active {
      background: #1a3a28;
      color: var(--accent-2);
      box-shadow: 0 2px 8px rgba(0,0,0,0.3);
    }
    [data-theme="dark"] .form-label {
      color: var(--text-soft);
    }
    [data-theme="dark"] .form-input {
      background: #0a1f10;
      border-color: rgba(34,197,94,0.25);
      color: var(--text);
    }
    [data-theme="dark"] .form-input:focus {
      border-color: var(--accent);
    }
    [data-theme="dark"] .error {
      background: rgba(220,38,38,0.12);
      color: #fca5a5;
      border-color: rgba(220,38,38,0.3);
    }
    [data-theme="dark"] .success {
      background: rgba(22,163,74,0.12);
      color: #6ee7b7;
      border-color: rgba(22,163,74,0.3);
    }
    [data-theme="dark"] .back-link a {
      color: var(--accent-2);
    }
  </style>
  <script src="/js/theme.js"></script>
</head>
<body>
  <label class="theme-switch"><input type="checkbox" class="theme-checkbox" onchange="toggleTheme()"><span class="theme-slider"></span></label>
  <div class="auth-card">
    <div class="logo">
      <div class="logo-icon">üè•</div>
      <h1 class="logo-title">MedQueue</h1>
    </div>
    <div class="tabs">
      <button class="tab active" id="loginTab" onclick="showLogin()">–í—Ö–æ–¥</button>
      <button class="tab" id="registerTab" onclick="showRegister()">–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</button>
    </div>
    <div id="message" class="message"></div>

    <!-- –í–•–û–î -->

    <div id="loginForm">
      <form onsubmit="handleLogin(event)">
        <div class="form-group">
          <label class="form-label">Email</label>
          <input type="email" class="form-input" id="loginEmail" required>
        </div>
        <div class="form-group">
          <label class="form-label">–ü–∞—Ä–æ–ª—å</label>
          <input type="password" class="form-input" id="loginPassword" required>
        </div>
        <div class="form-group">
          <label class="form-label">–ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ —Ä–æ–±–æ—Ç–∞</label>
          <div id="loginRecaptcha"></div>
        </div>
        <button type="submit" class="submit-btn">–í–æ–π—Ç–∏</button>
      </form>
    </div>

    <!-- –†–ï–ì–ò–°–¢–†–ê–¶–ò–Ø -->

    <div id="registerForm" class="hidden">
      <form onsubmit="handleRegister(event)">
        <div class="form-group">
          <label class="form-label">–ò–º—è</label>
          <input type="text" class="form-input" id="registerName" required>
        </div>
        <div class="form-group">
          <label class="form-label">Email</label>
          <input type="email" class="form-input" id="registerEmail" required>
        </div>
        <div class="form-group">
          <label class="form-label">–ü–∞—Ä–æ–ª—å</label>
          <input type="password" class="form-input" id="registerPassword" minlength="6" required>
        </div>
        <div class="form-group">
          <label class="form-label">–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å</label>
          <input type="password" class="form-input" id="registerPasswordConfirm" required>
        </div>
        <div class="form-group">
          <label class="form-label">–ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ —Ä–æ–±–æ—Ç–∞</label>
          <div id="registerRecaptcha"></div>
        </div>
        <button type="submit" class="submit-btn">–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è</button>
      </form>
        <div style="margin-top:16px;text-align:center;">
          <button type="button" onclick="openVideoModal()" style="display:inline-flex;align-items:center;gap:8px;background:rgba(22,163,74,0.08);color:#065f46;border:1.5px solid rgba(22,163,74,0.25);border-radius:12px;padding:11px 20px;font-size:14px;font-weight:700;cursor:pointer;transition:all 0.2s ease;width:100%;" onmouseover="this.style.background='rgba(22,163,74,0.15)'" onmouseout="this.style.background='rgba(22,163,74,0.08)'">
            <span style="font-size:18px;">‚ñ∂Ô∏è</span> –°–º–æ—Ç—Ä–µ—Ç—å –≤–∏–¥–µ–æ –æ –ø—Ä–æ–µ–∫—Ç–µ
          </button>
        </div>
    </div>

    <!-- –ü–û–î–¢–í–ï–†–ñ–î–ï–ù–ò–ï –ö–û–î–ê -->

    <div id="verifyForm" class="hidden code-step">
      <h3 style="margin-bottom: 15px;">–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ—á—Ç—É</h3>
      <p style="color: #6b7280; margin-bottom: 20px;">
        –ö–æ–¥ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω –Ω–∞ <strong id="emailSent"></strong>
      </p>
      <p style="color: #9ca3af; font-size: 13px; margin-bottom: 20px;">

        –ù–µ –≤–∏–¥–∏—Ç–µ –ø–∏—Å—å–º–æ? –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–∞–ø–∫—É <strong>–°–ø–∞–º</strong>.

      </p>
      <div class="form-group">
        <label class="form-label">–í–≤–µ–¥–∏—Ç–µ –∫–æ–¥</label>
        <input type="text" class="form-input code-input" id="verifyCode" maxlength="6" required>
      </div>
      <button onclick="handleVerify()" class="submit-btn">–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å</button>
      <p style="margin-top: 15px; font-size: 14px;">
        <a href="#" onclick="resendCode(); return false;" style="color: #16a34a;">–û—Ç–ø—Ä–∞–≤–∏—Ç—å –∫–æ–¥ —Å–Ω–æ–≤–∞</a>
      </p>
    </div>
    <div class="back-link">
      <a href="main.html">‚Üê –í–µ—Ä–Ω—É—Ç—å—Å—è –Ω–∞ –≥–ª–∞–≤–Ω—É—é</a>
    </div>
  </div>
  <script>
    const DEFAULT_LOCAL_API_ORIGIN = 'http://127.0.0.1:8001';
    const API_BASE = window.location.protocol === 'file:'
      ? (localStorage.getItem('medqueue_api_origin') || DEFAULT_LOCAL_API_ORIGIN)
      : window.location.origin;
    const API_URL = `${API_BASE}/api`;
    const AUTH_STORAGE_KEY = 'medqueue_current_user';
    const RECAPTCHA_SITE_KEY = '6LeIxAcTAAAAAJcZVRqyHh71UMIEGNQ_MXjiZKhI';
    const IS_FILE_PROTOCOL = window.location.protocol === 'file:';
    let currentEmail = '';
    const recaptchaWidgets = {
      login: null,
      register: null,

    };

    function redirectAfterAuth() {
      const params = new URLSearchParams(window.location.search);
      const next = params.get('next');
      if (next) {
        window.location.href = next;
        return;

      }
      window.location.href = 'profile.html';

    }
    document.addEventListener('DOMContentLoaded', function() {
      const currentUser = JSON.parse(localStorage.getItem(AUTH_STORAGE_KEY) || 'null');
      const params = new URLSearchParams(window.location.search);
      const tab = params.get('tab');
      if (currentUser) {
        redirectAfterAuth();
        return;

      }
      if (tab === 'register') {
        showRegister();

      } else {
        showLogin();

      }
      initRecaptchaWidgets();
      setTimeout(() => {
        if (IS_FILE_PROTOCOL) {
          showMessage('reCAPTCHA –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –ø—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏ —Ñ–∞–π–ª–∞ –Ω–∞–ø—Ä—è–º—É—é (file://). –û—Ç–∫—Ä–æ–π—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É —á–µ—Ä–µ–∑ http://localhost –∏–ª–∏ http://127.0.0.1.', 'error');
          return;

        }
        if (!window.grecaptcha) {
          showMessage('reCAPTCHA –Ω–µ –∑–∞–≥—Ä—É–∑–∏–ª–∞—Å—å. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç –∏ –æ—Ç–∫–ª—é—á–∏—Ç–µ –±–ª–æ–∫–∏—Ä–æ–≤—â–∏–∫ —Ä–µ–∫–ª–∞–º—ã.', 'error');

        }

      }, 3500);

    });

    function initRecaptchaWidgets() {
      if (IS_FILE_PROTOCOL) {
        return;

      }
      if (!window.grecaptcha || !window.grecaptcha.render) {
        setTimeout(initRecaptchaWidgets, 200);
        return;

      }
      if (recaptchaWidgets.login === null) {
        const loginContainer = document.getElementById('loginRecaptcha');
        if (loginContainer) {
          recaptchaWidgets.login = window.grecaptcha.render(loginContainer, {
            sitekey: RECAPTCHA_SITE_KEY,
            'error-callback': function() {
              showMessage('–û—à–∏–±–∫–∞ –∫–ª—é—á–∞/–¥–æ–º–µ–Ω–∞ reCAPTCHA. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ Site Key –≤ Google Console.', 'error');

            },

          });

        }

      }
      if (recaptchaWidgets.register === null) {
        const registerContainer = document.getElementById('registerRecaptcha');
        if (registerContainer) {
          recaptchaWidgets.register = window.grecaptcha.render(registerContainer, {
            sitekey: RECAPTCHA_SITE_KEY,
            'error-callback': function() {
              showMessage('–û—à–∏–±–∫–∞ –∫–ª—é—á–∞/–¥–æ–º–µ–Ω–∞ reCAPTCHA. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ Site Key –≤ Google Console.', 'error');

            },

          });

        }

      }

    }
    window.initRecaptchaWidgets = initRecaptchaWidgets;

    function getCaptchaToken(type) {
      const widgetId = recaptchaWidgets[type];
      if (widgetId === null || !window.grecaptcha) {
        return '';

      }
      return window.grecaptcha.getResponse(widgetId) || '';

    }

    function resetCaptcha(type) {
      const widgetId = recaptchaWidgets[type];
      if (widgetId !== null && window.grecaptcha) {
        window.grecaptcha.reset(widgetId);

      }

    }

    function showLogin() {
      document.getElementById('loginTab').classList.add('active');
      document.getElementById('registerTab').classList.remove('active');
      document.getElementById('loginForm').classList.remove('hidden');
      document.getElementById('registerForm').classList.add('hidden');
      document.getElementById('verifyForm').classList.add('hidden');
      initRecaptchaWidgets();
      hideMessage();

    }

    function showRegister() {
      document.getElementById('loginTab').classList.remove('active');
      document.getElementById('registerTab').classList.add('active');
      document.getElementById('loginForm').classList.add('hidden');
      document.getElementById('registerForm').classList.remove('hidden');
      document.getElementById('verifyForm').classList.add('hidden');
      initRecaptchaWidgets();
      hideMessage();

    }

    function showMessage(text, type) {
      const msg = document.getElementById('message');
      msg.textContent = text;
      msg.className = 'message ' + type;
      msg.style.display = 'block';

    }

    function hideMessage() {
      document.getElementById('message').style.display = 'none';

    }
    // –í–•–û–î

    async function handleLogin(e) {
      e.preventDefault();
      if (IS_FILE_PROTOCOL) {
        showMessage('–î–ª—è —Ä–∞–±–æ—Ç—ã reCAPTCHA –æ—Ç–∫—Ä–æ–π—Ç–µ auth —Å—Ç—Ä–∞–Ω–∏—Ü—É —á–µ—Ä–µ–∑ http://localhost –∏–ª–∏ http://127.0.0.1, –∞ –Ω–µ —á–µ—Ä–µ–∑ file://', 'error');
        return;

      }
      if (!window.grecaptcha) {
        showMessage('reCAPTCHA –Ω–µ –∑–∞–≥—Ä—É–∑–∏–ª–∞—Å—å. –û—Ç–∫–ª—é—á–∏—Ç–µ –±–ª–æ–∫–∏—Ä–æ–≤—â–∏–∫ —Ä–µ–∫–ª–∞–º—ã –∏ –æ–±–Ω–æ–≤–∏—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É.', 'error');
        return;

      }
      const captchaToken = getCaptchaToken('login');
      if (!captchaToken) {
        showMessage('–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç–µ, —á—Ç–æ –≤—ã –Ω–µ —Ä–æ–±–æ—Ç', 'error');
        return;

      }
      const email = document.getElementById('loginEmail').value;
      const password = document.getElementById('loginPassword').value;
      try {
        const response = await fetch(`${API_URL}/auth/login/`, {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ email, password, captcha_token: captchaToken })

        });
        const data = await response.json();
        if (response.ok) {
          const userToStore = { ...data.user, access: data.access, refresh: data.refresh };
          localStorage.setItem(AUTH_STORAGE_KEY, JSON.stringify(userToStore));
          showMessage('–í—Ö–æ–¥ –≤—ã–ø–æ–ª–Ω–µ–Ω!', 'success');
          setTimeout(redirectAfterAuth, 1000);

        } else {
          showMessage(data.error || '–û—à–∏–±–∫–∞ –≤—Ö–æ–¥–∞', 'error');
          resetCaptcha('login');

        }

      } catch (error) {
        showMessage(`–û—à–∏–±–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ —Å–µ—Ä–≤–µ—Ä—É. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ backend –∑–∞–ø—É—â–µ–Ω –ø–æ –∞–¥—Ä–µ—Å—É ${API_BASE}`, 'error');
        resetCaptcha('login');

      }

    }
    // –†–ï–ì–ò–°–¢–†–ê–¶–ò–Ø

    async function handleRegister(e) {
      e.preventDefault();
      if (IS_FILE_PROTOCOL) {
        showMessage('–î–ª—è —Ä–∞–±–æ—Ç—ã reCAPTCHA –æ—Ç–∫—Ä–æ–π—Ç–µ auth —Å—Ç—Ä–∞–Ω–∏—Ü—É —á–µ—Ä–µ–∑ http://localhost –∏–ª–∏ http://127.0.0.1, –∞ –Ω–µ —á–µ—Ä–µ–∑ file://', 'error');
        return;

      }
      if (!window.grecaptcha) {
        showMessage('reCAPTCHA –Ω–µ –∑–∞–≥—Ä—É–∑–∏–ª–∞—Å—å. –û—Ç–∫–ª—é—á–∏—Ç–µ –±–ª–æ–∫–∏—Ä–æ–≤—â–∏–∫ —Ä–µ–∫–ª–∞–º—ã –∏ –æ–±–Ω–æ–≤–∏—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É.', 'error');
        return;

      }
      const captchaToken = getCaptchaToken('register');
      if (!captchaToken) {
        showMessage('–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç–µ, —á—Ç–æ –≤—ã –Ω–µ —Ä–æ–±–æ—Ç', 'error');
        return;

      }
      const name = document.getElementById('registerName').value;
      const email = document.getElementById('registerEmail').value;
      const password = document.getElementById('registerPassword').value;
      const confirm = document.getElementById('registerPasswordConfirm').value;
      if (password !== confirm) {
        showMessage('–ü–∞—Ä–æ–ª–∏ –Ω–µ —Å–æ–≤–ø–∞–¥–∞—é—Ç', 'error');
        resetCaptcha('register');
        return;

      }
      try {
        const response = await fetch(`${API_URL}/auth/register/`, {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ name, email, password, captcha_token: captchaToken })

        });
        const data = await response.json();
        if (response.ok) {
          currentEmail = email;
          document.getElementById('emailSent').textContent = email;
          document.getElementById('registerForm').classList.add('hidden');
          document.getElementById('verifyForm').classList.remove('hidden');
          showMessage('–ö–æ–¥ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω –Ω–∞ –ø–æ—á—Ç—É ' + email + '.', 'success');

        } else {
          showMessage(data.error || '–û—à–∏–±–∫–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏', 'error');
          resetCaptcha('register');

        }

      } catch (error) {
        showMessage(`–û—à–∏–±–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ —Å–µ—Ä–≤–µ—Ä—É. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ backend –∑–∞–ø—É—â–µ–Ω –ø–æ –∞–¥—Ä–µ—Å—É ${API_BASE}`, 'error');
        resetCaptcha('register');

      }

    }
    // –ü–û–î–¢–í–ï–†–ñ–î–ï–ù–ò–ï

    async function handleVerify() {
      const code = document.getElementById('verifyCode').value;
      if (code.length !== 6) {
        showMessage('–í–≤–µ–¥–∏—Ç–µ 6-–∑–Ω–∞—á–Ω—ã–π –∫–æ–¥', 'error');
        return;

      }
      try {
        const response = await fetch(`${API_URL}/auth/verify/`, {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ email: currentEmail, code })

        });
        const data = await response.json();
        if (response.ok) {
          const userToStore = { ...data.user, access: data.access, refresh: data.refresh };
          localStorage.setItem(AUTH_STORAGE_KEY, JSON.stringify(userToStore));
          showMessage('–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è —É—Å–ø–µ—à–Ω–∞!', 'success');
          setTimeout(redirectAfterAuth, 1000);

        } else {
          showMessage(data.error || '–û—à–∏–±–∫–∞ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –∫–æ–¥–∞', 'error');

        }

      } catch (error) {
        showMessage(`–û—à–∏–±–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ —Å–µ—Ä–≤–µ—Ä—É. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ backend –∑–∞–ø—É—â–µ–Ω –ø–æ –∞–¥—Ä–µ—Å—É ${API_BASE}`, 'error');

      }

    }
    // –ü–û–í–¢–û–†–ù–ê–Ø –û–¢–ü–†–ê–í–ö–ê

    async function resendCode() {
      try {
        const response = await fetch(`${API_URL}/auth/resend/`, {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ email: currentEmail })

        });
        const data = await response.json();
        if (response.ok) {
          showMessage('–ù–æ–≤—ã–π –∫–æ–¥ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω –Ω–∞ –ø–æ—á—Ç—É.', 'success');

        } else {
          showMessage(data.error, 'error');

        }

      } catch (error) {
        showMessage(`–û—à–∏–±–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ —Å–µ—Ä–≤–µ—Ä—É. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ backend –∑–∞–ø—É—â–µ–Ω –ø–æ –∞–¥—Ä–µ—Å—É ${API_BASE}`, 'error');

      }

    }
  </script>

  <!-- ===== –í–ò–î–ï–û –ú–û–î–ê–õ ===== -->
  <div id="videoModal" style="display:none;position:fixed;inset:0;background:rgba(0,0,0,0.82);z-index:99999;align-items:center;justify-content:center;backdrop-filter:blur(8px);" onclick="if(event.target===this)closeVideoModal()">
    <div style="position:relative;width:92%;max-width:760px;background:#0f2d23;border-radius:20px;overflow:hidden;box-shadow:0 30px 80px rgba(0,0,0,0.7);">
      <!-- Header -->
      <div style="display:flex;align-items:center;justify-content:space-between;padding:16px 20px;border-bottom:1px solid rgba(255,255,255,0.08);">
        <div style="display:flex;align-items:center;gap:10px;">
          <span style="font-size:20px;">‚ñ∂Ô∏è</span>
          <span style="color:#fff;font-weight:700;font-size:15px;letter-spacing:0.3px;">MedQueue ‚Äì –æ –ø—Ä–æ–µ–∫—Ç–µ</span>
        </div>
        <button onclick="closeVideoModal()" style="background:rgba(255,255,255,0.1);border:none;color:white;width:32px;height:32px;border-radius:50%;font-size:16px;cursor:pointer;display:flex;align-items:center;justify-content:center;transition:background 0.2s;" onmouseover="this.style.background='rgba(255,255,255,0.22)'" onmouseout="this.style.background='rgba(255,255,255,0.1)'">‚úï</button>
      </div>
      <!-- Video -->
      <div style="aspect-ratio:16/9;background:#000;">
        <video id="projectVideo" controls style="width:100%;height:100%;display:block;">
          <source src="/video/invideo-ai-1080 Stop Waiting_ MedQueue in 45s! 2026-02-20.mp4" type="video/mp4">
          –í–∞—à –±—Ä–∞—É–∑–µ—Ä –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –≤–∏–¥–µ–æ.
        </video>
      </div>
    </div>
  </div>
  <script>
  function openVideoModal() {
    var m = document.getElementById('videoModal');
    m.style.display = 'flex';
    document.getElementById('projectVideo').play();
  }
  function closeVideoModal() {
    var m = document.getElementById('videoModal');
    m.style.display = 'none';
    var v = document.getElementById('projectVideo');
    v.pause();
    v.currentTime = 0;
  }
  </script>
</body>
</html>
