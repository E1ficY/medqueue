<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>MedQueue ‚Äì –£–¥–æ–±–Ω–∞—è –∑–∞–ø–∏—Å—å –≤ –∫–ª–∏–Ω–∏–∫–∏ –ê–ª–º–∞—Ç—ã</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="../css/styles.css">
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
  <script src="../js/script.js"></script>
  <style>

    /* ---- Map ---- */
    .hero-map {
      border-radius: 20px;
      overflow: hidden;
      height: 400px;
      min-width: 340px;
      flex: 1;
      box-shadow: 0 16px 48px rgba(0,0,0,0.22);
      border: 3px solid rgba(255,255,255,0.35);
      position: relative;
    }
    #hospitalsMap {
      width: 100%;
      height: 100%;
    }
    .leaflet-popup-content-wrapper {
      border-radius: 14px;
      box-shadow: 0 8px 24px rgba(0,0,0,0.18);
    }
    .map-popup-btn {
      display: block;
      margin-top: 10px;
      padding: 8px 0;
      background: linear-gradient(135deg,#16a34a,#15803d);
      color: white;
      text-align: center;
      border-radius: 9px;
      text-decoration: none;
      font-weight: 700;
      font-size: 13px;
    }
    .map-popup-btn:hover { opacity: .88; }

    .filter-tabs {
      display: flex;
      gap: 8px;
      margin-bottom: 16px;
      flex-wrap: wrap;
    }

    .filter-btn {
      padding: 8px 16px;
      border-radius: 8px;
      border: 1px solid rgba(22, 163, 74, 0.2);
      background: transparent;
      color: var(--accent);
      font-weight: 600;
      cursor: pointer;
      transition: all 0.2s ease;
      font-size: 14px;
    }

    .filter-btn:hover {
      background: rgba(22, 163, 74, 0.1);
    }

    .filter-btn.active {
      background: var(--accent);
      color: white;
      border-color: var(--accent);
    }

    /* ===== DARK THEME OVERRIDES ===== */
    [data-theme="dark"] .filter-btn {
      border-color: rgba(34,197,94,0.25);
      color: var(--accent-2);
    }
    [data-theme="dark"] .filter-btn:hover {
      background: rgba(34,197,94,0.1);
    }
    [data-theme="dark"] .filter-btn.active {
      background: var(--accent);
      color: #fff;
    }
  </style>
  <script src="/js/theme.js"></script>
</head>
<body>

  <header class="site-header">
    <div class="wrap">
      <a class="logo" href="main.html">MedQueue</a>

      <!-- Mobile menu button -->

      <button class="mobile-menu-btn" onclick="toggleMobileMenu()">‚ò∞</button>

      <!-- Navigation -->

      <nav id="mainNav">
        <a href="main.html" class="nav-link active">–ì–ª–∞–≤–Ω–∞—è</a>
        <a href="recording.html" class="nav-link">–ó–∞–ø–∏—Å–∞—Ç—å—Å—è</a>
        <a href="status.html" class="nav-link">–°—Ç–∞—Ç—É—Å –æ—á–µ—Ä–µ–¥–∏</a>
        <a href="profile.html" class="nav-link">–õ–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç</a>
        <a href="contacts%20and%20about.html" class="nav-link">–û –ø—Ä–æ–µ–∫—Ç–µ &amp; –ö–æ–Ω—Ç–∞–∫—Ç—ã</a>
      </nav>
    </div>
      <label class="theme-switch"><input type="checkbox" class="theme-checkbox" onchange="toggleTheme()"><span class="theme-slider"></span></label>
  </header>
  <script>

  function toggleMobileMenu() {
    const nav = document.getElementById('mainNav');
    nav.classList.toggle('mobile-open');

  }
  </script>

  <main>

    <section class="hero">
      <div class="wrap hero-inner">
        <div class="hero-left">
          <h1>–ú–µ–Ω—å—à–µ –æ—á–µ—Ä–µ–¥–µ–π ‚Äì –±—ã—Å—Ç—Ä–µ–µ –ø–æ–º–æ—â—å</h1>
          <p class="lead">–û–Ω–ª–∞–π–Ω-–∑–∞–ø–∏—Å—å –∏ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π —Å—Ç–∞—Ç—É—Å –æ—á–µ—Ä–µ–¥–∏ –≤ –ø–æ–ª–∏–∫–ª–∏–Ω–∏–∫–∞—Ö –ê–ª–º–∞—Ç—ã. –í—ã–±–µ—Ä–∏—Ç–µ –∫–ª–∏–Ω–∏–∫—É, –≤—Ä–∞—á–∞ –∏ –≤—Ä–µ–º—è ‚Äì –º—ã –ø–æ–∫–∞–∂–µ–º –ø—Ä–∏–º–µ—Ä–Ω–æ–µ –æ–∂–∏–¥–∞–Ω–∏–µ.</p>
          <div class="hero-cta">
            <a class="btn btn-primary" href="recording.html">–ó–∞–ø–∏—Å–∞—Ç—å—Å—è</a>
            <a class="btn btn-outline" href="status.html">–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å</a>
            <a class="btn btn-outline" href="profile.html">–õ–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç</a>
          </div>
        </div>
        <div class="hero-map">
          <div id="hospitalsMap"></div>
        </div>
      </div>
    </section>

    <section class="hospitals wrap">
      <div class="section-head">
        <h2>–ö–ª–∏–Ω–∏–∫–∏ –ê–ª–º–∞—Ç—ã</h2>
        <input id="search" class="search" placeholder="–ü–æ–∏—Å–∫ –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é –∏–ª–∏ –∞–¥—Ä–µ—Å—É..." />
      </div>

      <!-- –§–∏–ª—å—Ç—Ä—ã –ø–æ —Ç–∏–ø—É –∫–ª–∏–Ω–∏–∫ -->

      <div class="filter-tabs">
        <button class="filter-btn active" onclick="filterByType('all', event)">–í—Å–µ –∫–ª–∏–Ω–∏–∫–∏</button>
        <button class="filter-btn" onclick="filterByType('–ü–æ–ª–∏–∫–ª–∏–Ω–∏–∫–∞', event)">üè• –ü–æ–ª–∏–∫–ª–∏–Ω–∏–∫–∏</button>
        <button class="filter-btn" onclick="filterByType('–î–µ—Ç—Å–∫–∞—è', event)">üë∂ –î–µ—Ç—Å–∫–∏–µ</button>
        <button class="filter-btn" onclick="filterByType('–ë–æ–ª—å–Ω–∏—Ü–∞', event)">üè® –ë–æ–ª—å–Ω–∏—Ü—ã</button>
        <button class="filter-btn" onclick="filterByType('–°–ø–µ—Ü. –∫–ª–∏–Ω–∏–∫–∞', event)">‚öïÔ∏è –°–ø–µ—Ü. –∫–ª–∏–Ω–∏–∫–∏</button>
      </div>
      <div id="hospList" class="grid"></div>
    </section>
  </main>

  <footer class="site-footer">
    <div class="wrap">
      <div>¬© 2025 MedQueue ‚Äì –£–¥–æ–±–Ω–∞—è –∑–∞–ø–∏—Å—å –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—á–µ—Ä–µ–¥—è–º–∏</div>
      <div class="muted">–í–µ—Ä—Å–∏—è –ø—Ä–æ—Ç–æ—Ç–∏–ø–∞</div>
    </div>
  </footer>

  <script>
  // GPS-–∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –±–æ–ª—å–Ω–∏—Ü –ê–ª–º–∞—Ç—ã (–ø–æ —Ä–µ–∞–ª—å–Ω—ã–º –∞–¥—Ä–µ—Å–∞–º)
  const HOSPITAL_COORDS = {
    // –ì–æ—Å. –ø–æ–ª–∏–∫–ª–∏–Ω–∏–∫–∏ (–∞–¥—Ä–µ—Å–∞ –ø—Ä–æ–≤–µ—Ä–µ–Ω—ã –ø–æ 2–ì–ò–°)
    '–ì–æ—Ä–æ–¥—Å–∫–∞—è –ø–æ–ª–∏–∫–ª–∏–Ω–∏–∫–∞ ‚Ññ1':                [43.257, 76.907],  // —É–ª. –ì–æ–≥–æ–ª—è, 53
    '–ì–æ—Ä–æ–¥—Å–∫–∞—è –ø–æ–ª–∏–∫–ª–∏–Ω–∏–∫–∞ ‚Ññ2':                [43.259, 76.892],  // —É–ª. –®—É—Ö–æ–≤–∞, 37–ë
    '–ì–æ—Ä–æ–¥—Å–∫–∞—è –ø–æ–ª–∏–∫–ª–∏–Ω–∏–∫–∞ ‚Ññ3':                [43.259, 76.978],  // —É–ª. –†–æ–∑—ã–±–∞–∫–∏–µ–≤–∞, 74
    '–ì–æ—Ä–æ–¥—Å–∫–∞—è –ø–æ–ª–∏–∫–ª–∏–Ω–∏–∫–∞ ‚Ññ4':                [43.261, 76.896],  // —É–ª. –¢–æ—Ä–∞–π–≥—ã—Ä–æ–≤–∞, 12
    '–ì–æ—Ä–æ–¥—Å–∫–∞—è –ø–æ–ª–∏–∫–ª–∏–Ω–∏–∫–∞ ‚Ññ5':                [43.262, 76.915],  // —É–ª. –ú–∞–∫–∞—Ç–∞–µ–≤–∞, 141
    '–ì–æ—Ä–æ–¥—Å–∫–∞—è –ø–æ–ª–∏–∫–ª–∏–Ω–∏–∫–∞ ‚Ññ6':                [43.248, 76.836],  // 4-–π –º–∏–∫—Ä–æ—Ä–∞–π–æ–Ω, 3–∞
    '–ì–æ—Ä–æ–¥—Å–∫–∞—è –ø–æ–ª–∏–∫–ª–∏–Ω–∏–∫–∞ ‚Ññ7':                [43.234, 76.925],  // –±—É–ª—å–≤. –ë—É—Ö–∞—Ä –∂—ã—Ä–∞—É, 14
    '–ì–æ—Ä–æ–¥—Å–∫–∞—è –ø–æ–ª–∏–∫–ª–∏–Ω–∏–∫–∞ ‚Ññ9':                [43.280, 76.961],  // —É–ª. –£—Ç–µ–≥–µ–Ω –±–∞—Ç—ã—Ä–∞, 21
    '–ì–æ—Ä–æ–¥—Å–∫–∞—è –ø–æ–ª–∏–∫–ª–∏–Ω–∏–∫–∞ ‚Ññ12':               [43.225, 76.931],  // —É–ª. –ü–æ–ø–æ–≤–∞, 23
    '–ì–æ—Ä–æ–¥—Å–∫–∞—è –ø–æ–ª–∏–∫–ª–∏–Ω–∏–∫–∞ ‚Ññ15':               [43.282, 77.038],  // –º–∫—Ä. –ñ–µ—Ç—ã—Å—É-1, 30
    // –î–µ—Ç—Å–∫–∏–µ –ø–æ–ª–∏–∫–ª–∏–Ω–∏–∫–∏
    '–î–µ—Ç—Å–∫–∞—è –ø–æ–ª–∏–∫–ª–∏–Ω–∏–∫–∞ ‚Ññ1':                  [43.256, 76.930],  // —É–ª. –®–µ–≤—á–µ–Ω–∫–æ, 118
    '–î–µ—Ç—Å–∫–∞—è –ø–æ–ª–∏–∫–ª–∏–Ω–∏–∫–∞ ‚Ññ3':                  [43.249, 76.902],  // —É–ª. –ë–∞–π–∑–∞–∫–æ–≤–∞, 280
    '–î–µ—Ç—Å–∫–∞—è –ø–æ–ª–∏–∫–ª–∏–Ω–∏–∫–∞ ‚Ññ4':                  [43.278, 76.999],  // –ú–æ–Ω—Ç–∞–∂–Ω–∞—è —É–ª., 33
    '–î–µ—Ç—Å–∫–∞—è –ø–æ–ª–∏–∫–ª–∏–Ω–∏–∫–∞ ‚Ññ6':                  [43.226, 76.878],  // —É–ª. –°–∞–∏–Ω–∞, 89
    // –ë–æ–ª—å–Ω–∏—Ü—ã
    '–ì–æ—Ä–æ–¥—Å–∫–∞—è –∫–ª–∏–Ω–∏—á–µ—Å–∫–∞—è –±–æ–ª—å–Ω–∏—Ü–∞ ‚Ññ1':       [43.229, 76.802],  // –ö–∞–ª–∫–∞–º–∞–Ω –º–∫—Ä., 2
    '–ì–æ—Ä–æ–¥—Å–∫–∞—è –∫–ª–∏–Ω–∏—á–µ—Å–∫–∞—è –±–æ–ª—å–Ω–∏—Ü–∞ ‚Ññ4':       [43.319, 76.963],  // —É–ª. –ü–∞–ø–∞–Ω–∏–Ω–∞, 220
    '–ì–æ—Ä–æ–¥—Å–∫–∞—è –∫–ª–∏–Ω–∏—á–µ—Å–∫–∞—è –±–æ–ª—å–Ω–∏—Ü–∞ ‚Ññ7':       [43.232, 76.800],  // –ö–∞–ª–∫–∞–º–∞–Ω –º–∫—Ä., 20
    '–¶–µ–Ω—Ç—Ä–∞–ª—å–Ω–∞—è –≥–æ—Ä–æ–¥—Å–∫–∞—è –∫–ª–∏–Ω–∏—á–µ—Å–∫–∞—è –±–æ–ª—å–Ω–∏—Ü–∞': [43.204, 76.878],  // —É–ª. –û—Ä–∞–∑–∞ –ñ–∞–Ω–¥–æ—Å–æ–≤–∞, 6
    '–ë–æ–ª—å–Ω–∏—Ü–∞ —Å–∫–æ—Ä–æ–π –º–µ–¥–∏—Ü–∏–Ω—Å–∫–æ–π –ø–æ–º–æ—â–∏':      [43.255, 76.929],  // —É–ª. –ö–∞–∑—ã–±–µ–∫ –±–∏, 96
    // –°–ø–µ—Ü. –∫–ª–∏–Ω–∏–∫–∏
    '–ì–æ—Ä–æ–¥—Å–∫–∞—è –ø–æ–ª–∏–∫–ª–∏–Ω–∏–∫–∞ –≤–µ—Ç–µ—Ä–∞–Ω–æ–≤ –í–û–í':     [43.260, 76.915],
    '–°—Ç–æ–º–∞—Ç–æ–ª–æ–≥–∏—á–µ—Å–∫–∞—è –ø–æ–ª–∏–∫–ª–∏–Ω–∏–∫–∞ ‚Ññ1':        [43.249, 76.921],
    '–°—Ç–æ–º–∞—Ç–æ–ª–æ–≥–∏—á–µ—Å–∫–∞—è –ø–æ–ª–∏–∫–ª–∏–Ω–∏–∫–∞ ‚Ññ3':        [43.236, 76.931],
    '–ö–æ–∂–Ω–æ-–≤–µ–Ω–µ—Ä–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π –¥–∏—Å–ø–∞–Ω—Å–µ—Ä':        [43.248, 76.953],
    '–ü—Ä–æ—Ç–∏–≤–æ—Ç—É–±–µ—Ä–∫—É–ª–µ–∑–Ω—ã–π –¥–∏—Å–ø–∞–Ω—Å–µ—Ä':          [43.243, 76.876],
    // –ß–∞—Å—Ç–Ω—ã–µ –∫–ª–∏–Ω–∏–∫–∏
    '–ú–µ–¥–∏—Ü–∏–Ω—Å–∫–∏–π —Ü–µ–Ω—Ç—Ä ¬´–ú–µ–¥–µ—É¬ª':               [43.214, 76.948],
    '–ö–ª–∏–Ω–∏–∫–∞ ¬´–ê—Å–µ–º¬ª':                          [43.253, 76.898],
    '–ú–µ–¥–∏—Ü–∏–Ω—Å–∫–∏–π —Ü–µ–Ω—Ç—Ä ¬´Interteach¬ª':          [43.247, 76.923],
    '–ö–ª–∏–Ω–∏–∫–∞ ¬´VITA¬ª':                          [43.228, 76.942],
    '–ú–µ–¥–∏—Ü–∏–Ω—Å–∫–∏–π —Ü–µ–Ω—Ç—Ä ¬´–ù—É—Ä-–ú–µ–¥–∏–∫—É—Å¬ª':         [43.225, 76.920],
  };
  // –†–µ–∑–µ—Ä–≤–Ω—ã–µ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –Ω–∞ —Å–ª—É—á–∞–π –Ω–æ–≤–æ–≥–æ —É—á—Ä–µ–∂–¥–µ–Ω–∏—è
  const FALLBACK_POINTS = [
    [43.238, 76.889], [43.270, 76.930], [43.200, 76.860], [43.290, 77.010],
  ];

  const HOSPITAL_ICONS = { '–ü–æ–ª–∏–∫–ª–∏–Ω–∏–∫–∞': 'üè•', '–ë–æ–ª—å–Ω–∏—Ü–∞': 'üè®', '–î–µ—Ç—Å–∫–∞—è': 'üë∂', '–°–ø–µ—Ü. –∫–ª–∏–Ω–∏–∫–∞': '‚öïÔ∏è' };

  function buildMap(hosp) {
    const map = L.map('hospitalsMap', { zoomControl: true, scrollWheelZoom: true })
      .setView([43.238, 76.900], 12);
    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
      attribution: '¬© <a href="https://openstreetmap.org">OpenStreetMap</a>',
      maxZoom: 18,
    }).addTo(map);
    hosp.forEach(function(h, i) {
      const coords = HOSPITAL_COORDS[h.name] || FALLBACK_POINTS[i % FALLBACK_POINTS.length];
      const icon = HOSPITAL_ICONS[h.type] || 'üè•';
      L.marker(coords, { title: h.name }).addTo(map)
        .bindPopup(
          `<div style="min-width:190px;font-family:Inter,sans-serif;">
            <div style="font-weight:800;font-size:14px;color:#064e3b;margin-bottom:4px;">${icon} ${h.name}</div>
            <div style="font-size:12px;color:#6b7280;margin-bottom:2px;">${h.type}</div>
            <div style="font-size:12px;color:#6b7280;margin-bottom:6px;">üìç ${h.address || ''}</div>
            <div style="font-size:12px;margin-bottom:8px;">–û—á–µ—Ä–µ–¥—å: <b>${h.queue || 0}</b> —á–µ–ª. ¬∑ ~${h.waiting} –º–∏–Ω</div>
            <a class="map-popup-btn" href="recording.html?hospital=${h.id}">–ó–∞–ø–∏—Å–∞—Ç—å—Å—è ‚Üí</a>
          </div>`
        );
    });
  }

  document.addEventListener('hospitalsReady', function() {
    buildMap(window.hospitals);
  });
  </script>
</body>
</html>
